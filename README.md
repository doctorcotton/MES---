# MES 饮料制造配方编辑器

一个用于定义和管理饮料生产工艺流程的可视化编辑器，支持结构化数据编辑和自动流程图生成。

## 功能特性

- 📊 **数据表格编辑**: 左侧面板提供可编辑的表格，用于定义工艺步骤
- 🎨 **自动流程图**: 右侧面板实时渲染流程图，使用 Dagre 自动布局
- 🔗 **连接管理**: 支持配置节点间的连接关系和投料顺序
- 🎯 **交互联动**: 表格行和流程图节点支持 Hover 高亮和点击同步
- 💾 **导入导出**: 支持 JSON 格式的导入导出，便于与 MES 系统集成

## 技术栈

- React 18 + TypeScript
- Vite
- React Flow (流程图)
- Dagre.js (自动布局)
- Zustand (状态管理)
- Tailwind CSS + Shadcn/UI (UI组件)

## 快速开始

### 安装依赖

```bash
npm install
```

### 启动开发服务器

```bash
npm run dev
```

### 构建生产版本

```bash
npm run build
```

## 项目结构

```
src/
├── components/
│   ├── ui/              # Shadcn UI 组件
│   ├── editor/          # 编辑器组件 (表格、连接管理器)
│   ├── graph/           # 流程图组件 (节点、边、画布)
│   └── layout/          # 布局组件
├── store/               # Zustand 状态管理
├── hooks/               # 自定义 Hooks
├── types/               # TypeScript 类型定义
├── data/                # 初始数据
└── lib/                 # 工具函数
```

## 使用说明

1. **添加步骤**: 点击表格底部的"添加步骤"按钮
2. **编辑步骤**: 点击表格单元格进行编辑
3. **配置连接**: 点击"下一步"列的"配置"按钮，在弹出的对话框中添加连接
4. **设置顺序**: 在连接管理器中设置序列顺序（1, 2, 3...）
5. **导出数据**: 点击顶部栏的"Export JSON"按钮导出配方数据

## 数据格式

导出的 JSON 格式遵循以下结构：

```json
{
  "metadata": {
    "name": "饮料生产工艺配方",
    "version": "1.0.0",
    "updatedAt": "2024-01-01T00:00:00.000Z"
  },
  "nodes": [...],
  "edges": [...]
}
```

## 许可证

MIT
